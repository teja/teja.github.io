<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baby Log</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#007bff">
    <link rel="stylesheet" href="babylog.css">
</head>
<body>
    <div class="app-container">
        <h1>Baby Log</h1>

        <details class="summary-details">
            <summary>Summary</summary>
            <div id="summary-container" class="summary-container">
                <!-- Summary content will be injected here -->
            </div>
        </details>

        <div class="tab-bar">
            <button class="tab-button active" data-tab="log">Log</button>
            <button class="tab-button" data-tab="records">Records</button>
            <button class="tab-button" data-tab="report">Report</button>
            <button class="tab-button" data-tab="animal-sounds">Animal Sounds</button>
        </div>

        <div class="tab-content">
            <!-- Log Tab -->
            <div id="log-tab" class="tab-panel active">
                <div class="log-controls">
                    <button id="voice-log-button">Log with Voice</button>
                </div>
                <div id="confirmation-area" style="display: none;">
                    <p id="transcribed-text"></p>
                    <button id="confirm-button">Confirm</button>
                    <button id="try-again-button">Try Again</button>
                </div>
                <div id="standard-log-area">
                    <h2>Standard Log</h2>
                    <form id="standard-log-form">
                        <div class="form-group">
                            <label>Event:</label>
                            <div class="radio-group" id="event-type-group">
                                <input type="radio" id="event-feed" name="event-type" value="Feed" checked><label for="event-feed">Feed</label>
                                <input type="radio" id="event-poo" name="event-type" value="Poo"><label for="event-poo">Poo</label>
                                <input type="radio" id="event-urine" name="event-type" value="Urine"><label for="event-urine">Urine</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Time:</label>
                            <div class="radio-group" id="time-offset-group">
                                <input type="radio" id="time-0" name="time-offset" value="0" checked><label for="time-0">Now</label>
                                <input type="radio" id="time-15" name="time-offset" value="15"><label for="time-15">15m ago</label>
                                <input type="radio" id="time-30" name="time-offset" value="30"><label for="time-30">30m ago</label>
                                <input type="radio" id="time-60" name="time-offset" value="60"><label for="time-60">1h ago</label>
                                <input type="radio" id="time-120" name="time-offset" value="120"><label for="time-120">2h ago</label>
                                <input type="radio" id="time-custom" name="time-offset" value="custom"><label for="time-custom">Custom</label>
                            </div>
                        </div>
                        <div class="form-group" id="custom-time-group" style="display: none;">
                            <label for="custom-date">Custom Date:</label>
                            <input type="date" id="custom-date" name="custom-date">
                            <label for="custom-time">Custom Time:</label>
                            <input type="time" id="custom-time" name="custom-time">
                        </div>
                        <div class="form-group">
                            <label for="note-input">Optional Note:</label>
                            <div class="note-input-wrapper">
                                <textarea id="note-input" rows="2"></textarea>
                                <button type="button" id="note-voice-button" class="voice-input-button">ðŸŽ¤</button>
                            </div>
                        </div>
                        <button type="submit" id="save-log-button">Save Log</button>
                    </form>
                </div>
            </div>

            <!-- Records Tab -->
            <div id="records-tab" class="tab-panel">
                <div id="records-area">
                    <h2>All Records</h2>
                    <div id="filters">
                        <label for="start-date">From:</label>
                        <input type="date" id="start-date">
                        <label for="end-date">To:</label>
                        <input type="date" id="end-date">
                        <button id="filter-button">Filter</button>
                        <button id="export-records-button">Export to CSV</button>
                    </div>
                    <div id="records-container"></div>
                </div>
            </div>

            <!-- Report Tab -->
            <div id="report-tab" class="tab-panel">
                <h2>Reports</h2>
                <div id="report-daily">
                    <h3>Daily Breakdown</h3>
                    <button id="export-report-button">Export to CSV</button>
                    <table id="daily-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Feeds</th>
                                <th>Poo</th>
                                <th>Urine</th>
                            </tr>
                        </thead>
                        <tbody id="daily-table-body">
                            <!-- Daily stats will be injected here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Animal Sounds Tab -->
            <div id="animal-sounds-tab" class="tab-panel">
                <h2>Animal Sounds</h2>
                <div class="camera-container">
                    <video id="animal-sounds-video" autoplay playsinline></video>
                    <div id="animal-sounds-overlay" class="overlay"></div>
                </div>
                <button id="animal-sounds-button">Start Camera</button>
            </div>
        </div>
    </div>

    <!-- Global Overlays -->
    <div id="save-overlay">
        <div class="overlay-content">
            Log Saved!
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>
    <script src="babylog.js"></script>
</body>
</html>
